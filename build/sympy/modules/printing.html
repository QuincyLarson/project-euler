

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Printing System &mdash; SymPy v0.7.1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full"></script>
    <link rel="top" title="SymPy v0.7.1 documentation" href="../index.html" />
    <link rel="up" title="SymPy Modules Reference" href="index.html" />
    <link rel="next" title="Plotting" href="plotting.html" />
    <link rel="prev" title="Literature" href="polys/literature.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="polys/literature.html" title="Literature"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SymPy v0.7.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">SymPy Modules Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="printing-system">
<h1>Printing System<a class="headerlink" href="#printing-system" title="Permalink to this headline">¶</a></h1>
<p>See the <a class="reference internal" href="../tutorial.html#printing-tutorial"><em>Printing</em></a> section in Tutorial for introduction into
printing.</p>
<p>This guide documents the printing system in SymPy and how it works
internally.</p>
<div class="section" id="module-sympy.printing.printer">
<span id="printer-class"></span><h2>Printer Class<a class="headerlink" href="#module-sympy.printing.printer" title="Permalink to this headline">¶</a></h2>
<p>The main class responsible for printing is <tt class="docutils literal"><span class="pre">Printer</span></tt> (see also its
<a class="reference external" href="https://github.com/sympy/sympy/blob/master/sympy/printing/printer.py">source code</a>):</p>
<dl class="class">
<dt id="sympy.printing.printer.Printer">
<em class="property">class </em><tt class="descclassname">sympy.printing.printer.</tt><tt class="descname">Printer</tt><big>(</big><em>settings=None</em><big>)</big><a class="reference internal" href="../_modules/sympy/printing/printer.html#Printer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.printing.printer.Printer" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic printer</p>
<p>Its job is to provide infrastructure for implementing new printers easily.</p>
<p>Basically, if you want to implement a printer, all you have to do is:</p>
<ol class="arabic">
<li><p class="first">Subclass Printer.</p>
</li>
<li><p class="first">Define Printer.printmethod in your subclass.
If a object has a method with that name, this method will be used
for printing.</p>
</li>
<li><p class="first">In your subclass, define _print_&lt;CLASS&gt; methods</p>
<p>For each class you want to provide printing to, define an appropriate
method how to do it. For example if you want a class FOO to be printed in
its own way, define _print_FOO:</p>
<dl class="docutils">
<dt>def _print_FOO(self, e):</dt>
<dd><p class="first last">...</p>
</dd>
</dl>
<p>this should return how FOO instance e is printed</p>
<p>Also, if BAR is a subclass of FOO, _print_FOO(bar) will be called for
instance of BAR, if no _print_BAR is provided.  Thus, usually, we don&#8217;t
need to provide printing routines for every class we want to support &#8211;
only generic routine has to be provided for a set of classes.</p>
<p>A good example for this are functions - for example PrettyPrinter only
defines _print_Function, and there is no _print_sin, _print_tan, etc...</p>
<p>On the other hand, a good printer will probably have to define separate
routines for Symbol, Atom, Number, Integral, Limit, etc...</p>
</li>
<li><p class="first">If convenient, override self.emptyPrinter</p>
<p>This callable will be called to obtain printing result as a last resort,
that is when no appropriate print method was found for an expression.</p>
</li>
</ol>
<p>Example of overloading StrPrinter:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">Basic</span><span class="p">,</span> <span class="n">Function</span><span class="p">,</span> <span class="n">Symbol</span>
<span class="kn">from</span> <span class="nn">sympy.printing.str</span> <span class="kn">import</span> <span class="n">StrPrinter</span>

<span class="k">class</span> <span class="nc">CustomStrPrinter</span><span class="p">(</span><span class="n">StrPrinter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Example of how to customize the StrPrinter for both a Sympy class and a</span>
<span class="sd">    user defined class subclassed from the Sympy Basic class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_print_Derivative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Custom printing of the Sympy Derivative class.</span>

<span class="sd">        Instead of:</span>

<span class="sd">        D(x(t), t) or D(x(t), t, t)</span>

<span class="sd">        We will print:</span>

<span class="sd">        x&#39;     or     x&#39;&#39;</span>

<span class="sd">        In this example, expr.args == (x(t), t), and expr.args[0] == x(t), and</span>
<span class="sd">        expr.args[0].func == x</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">func</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

    <span class="k">def</span> <span class="nf">_print_MyClass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print the characters of MyClass.s alternatively lower case and upper</span>
<span class="sd">        case</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">s</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="n">char</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="n">char</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">s</span>

<span class="c"># Override the __str__ method of to use CustromStrPrinter</span>
<span class="n">Basic</span><span class="o">.</span><span class="n">__str__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="n">CustomStrPrinter</span><span class="p">()</span><span class="o">.</span><span class="n">doprint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="c"># Demonstration of CustomStrPrinter:</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">Function</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)(</span><span class="n">t</span><span class="p">)</span>
<span class="n">dxdt</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>            <span class="c"># dxdt is a Derivative instance</span>
<span class="n">d2xdt2</span> <span class="o">=</span> <span class="n">dxdt</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>       <span class="c"># dxdt2 is a Derivative instance</span>
<span class="n">ex</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">(</span><span class="s">&#39;I like both lowercase and upper case&#39;</span><span class="p">)</span>

<span class="k">print</span> <span class="n">dxdt</span>
<span class="k">print</span> <span class="n">d2xdt2</span>
<span class="k">print</span> <span class="n">ex</span>
</pre></div>
</div>
<p>The output of the above code is:</p>
<div class="highlight-python"><pre>x'
x''
i lIkE BoTh lOwErCaSe aNd uPpEr cAsE</pre>
</div>
<p>By overriding Basic.__str__, we can customize the printing of anything that
is subclassed from Basic.</p>
<dl class="method">
<dt id="sympy.printing.printer.Printer.doprint">
<tt class="descname">doprint</tt><big>(</big><em>expr</em><big>)</big><a class="reference internal" href="../_modules/sympy/printing/printer.html#Printer.doprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.printing.printer.Printer.doprint" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns printer&#8217;s representation for expr (as a string)</p>
</dd></dl>

<dl class="method">
<dt id="sympy.printing.printer.Printer._print">
<tt class="descname">_print</tt><big>(</big><em>expr</em>, <em>*args</em><big>)</big><a class="reference internal" href="../_modules/sympy/printing/printer.html#Printer._print"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.printing.printer.Printer._print" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal dispatcher</p>
<dl class="docutils">
<dt>Tries the following concepts to print an expression:</dt>
<dd><ol class="first last arabic simple">
<li>Let the object print itself if it knows how.</li>
<li>Take the best fitting method defined in the printer.</li>
<li>As fall-back use the emptyPrinter method for the printer.</li>
</ol>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-sympy.printing.pretty.pretty">
<span id="prettyprinter-class"></span><h2>PrettyPrinter Class<a class="headerlink" href="#module-sympy.printing.pretty.pretty" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-sympy.printing.pretty.pretty_symbology"></span><span class="target" id="module-sympy.printing.pretty.pretty_stringpict"></span><p>Pretty printing subsystem is implemented in <tt class="docutils literal"><span class="pre">sympy.printing.pretty.pretty</span></tt> by
the <tt class="docutils literal"><span class="pre">PrettyPrinter</span></tt> class deriving from <tt class="docutils literal"><span class="pre">Printer</span></tt>.  It relies on modules
<tt class="docutils literal"><span class="pre">sympy.printing.pretty.stringPict</span></tt>, and
<tt class="docutils literal"><span class="pre">sympy.printing.pretty.pretty_symbology</span></tt> for rendering nice-looking formulas.</p>
<p>The module <tt class="docutils literal"><span class="pre">stringPict</span></tt> provides a base class <tt class="docutils literal"><span class="pre">stringPict</span></tt> and a derived
class <tt class="docutils literal"><span class="pre">prettyForm</span></tt> that ease the creation and manipulation of formulas that
span across multiple lines.</p>
<p>The module <tt class="docutils literal"><span class="pre">pretty_symbology</span></tt> provides primitives to construct 2D shapes
(hline, vline, etc) together with a technique to use unicode automatically when
possible.</p>
</div>
<div class="section" id="module-sympy.printing.mathml">
<span id="mathmlprinter"></span><h2>MathMLPrinter<a class="headerlink" href="#module-sympy.printing.mathml" title="Permalink to this headline">¶</a></h2>
<p>This class is responsible for MathML printing. See <tt class="docutils literal"><span class="pre">sympy.printing.mathml</span></tt>.</p>
<p>More info on mathml content: <a class="reference external" href="http://www.w3.org/TR/MathML2/chapter4.html">http://www.w3.org/TR/MathML2/chapter4.html</a></p>
</div>
<div class="section" id="module-sympy.printing.latex">
<span id="latexprinter"></span><h2>LatexPrinter<a class="headerlink" href="#module-sympy.printing.latex" title="Permalink to this headline">¶</a></h2>
<p>This class implements LaTeX printing. See <tt class="docutils literal"><span class="pre">sympy.printing.latex</span></tt>.</p>
<p>See also the extended LatexPrinter: <a class="reference internal" href="galgebra/latex_ex/latex_ex.html#extended-latex"><em>Extended LaTeXModule for Sympy</em></a></p>
</div>
<div class="section" id="module-sympy.printing.gtk">
<span id="gtk"></span><h2>Gtk<a class="headerlink" href="#module-sympy.printing.gtk" title="Permalink to this headline">¶</a></h2>
<p>You can print to a grkmathview widget using the function print_gtk located in
sympy.printing.gtk (it requires to have installed gtkmatmatview and
libgtkmathview-bin in some systems).</p>
<p>GtkMathView accepts MathML, so this rendering depends on the mathml representation of the expression</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">print_gtk</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="module-sympy.printing.python">
<span id="pythonprinter"></span><h2>PythonPrinter<a class="headerlink" href="#module-sympy.printing.python" title="Permalink to this headline">¶</a></h2>
<p>This class implements Python printing. Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">print_python</span><span class="p">,</span> <span class="n">sin</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy.abc</span> <span class="kn">import</span> <span class="n">x</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">print_python</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">3</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="go">x = Symbol(&#39;x&#39;)</span>
<span class="go">e = 5*x**3 + sin(x)</span>
</pre></div>
</div>
</div>
<div class="section" id="fcode">
<h2>fcode<a class="headerlink" href="#fcode" title="Permalink to this headline">¶</a></h2>
<p>The fcode function translates a sympy expression into Fortran code. The main
purpose is to take away the burden of manually translating long mathematical
expressions. Therefore the resulting expression should also require no (or very
little) manual tweaking to make it compilable. The optional arguments of fcode
can be used to fine-tune the behavior of fcode in such a way that manual changes
in the result are no longer needed.</p>
<span class="target" id="module-sympy.printing.fcode"></span><dl class="function">
<dt id="sympy.printing.fcode.fcode">
<tt class="descclassname">sympy.printing.fcode.</tt><tt class="descname">fcode</tt><big>(</big><em>expr</em>, <em>**settings</em><big>)</big><a class="reference internal" href="../_modules/sympy/printing/fcode.html#fcode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.printing.fcode.fcode" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an expr to a string of Fortran 77 code</p>
<dl class="docutils">
<dt>Arguments:</dt>
<dd>expr  &#8211;  a sympy expression to be converted</dd>
<dt>Optional arguments:</dt>
<dd><dl class="first docutils">
<dt>assign_to  &#8211;  When given, the argument is used as the name of the</dt>
<dd>variable to which the Fortran expression is assigned.
(This is helpful in case of line-wrapping.)</dd>
</dl>
<p>precision  &#8211;  the precision for numbers such as pi [default=15]
user_functions  &#8211;  A dictionary where keys are FunctionClass instances</p>
<blockquote>
<div>and values are there string representations.</div></blockquote>
<dl class="last docutils">
<dt>human  &#8211;  If True, the result is a single string that may contain</dt>
<dd>some parameter statements for the number symbols. If
False, the same information is returned in a more
programmer-friendly data structure.</dd>
<dt>source_format  &#8211;  The source format can be either &#8216;fixed&#8217; or &#8216;free&#8217;.</dt>
<dd>[default=&#8217;fixed&#8217;]</dd>
</dl>
</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="n">fcode</span><span class="p">,</span> <span class="n">symbols</span><span class="p">,</span> <span class="n">Rational</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sin</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">tau</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&#39;x,tau&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fcode</span><span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">tau</span><span class="p">)</span><span class="o">**</span><span class="n">Rational</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="go">&#39;      8*sqrt(2.0d0)*tau**(7.0d0/2.0d0)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fcode</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">assign_to</span><span class="o">=</span><span class="s">&quot;s&quot;</span><span class="p">)</span>
<span class="go">&#39;      s = sin(x)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
<span class="go">      parameter (pi = 3.14159265358979d0)</span>
<span class="go">      pi</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sympy.printing.fcode.print_fcode">
<tt class="descclassname">sympy.printing.fcode.</tt><tt class="descname">print_fcode</tt><big>(</big><em>expr</em>, <em>**settings</em><big>)</big><a class="reference internal" href="../_modules/sympy/printing/fcode.html#print_fcode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.printing.fcode.print_fcode" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints the Fortran representation of the given expression.</p>
<p>See fcode for the meaning of the optional arguments.</p>
</dd></dl>

<p>Two basic examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sympy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fcode</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
<span class="go">&#39;      sqrt(-x**2 + 1)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fcode</span><span class="p">((</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="n">I</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">conjugate</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
<span class="go">&#39;      (cmplx(3,4))/(-conjg(x) + 1)&#39;</span>
</pre></div>
</div>
<p>An example where line wrapping is required:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">expr</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">series</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">removeO</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
<span class="go">      -715*x**18/65536 - 429*x**16/32768 - 33*x**14/2048 - 21*x**12/1024</span>
<span class="go">     @ - 7*x**10/256 - 5*x**8/128 - x**6/16 - x**4/8 - x**2/2 + 1</span>
</pre></div>
</div>
<p>In case of line wrapping, it is handy to include the assignment so that lines
are wrapped properly when the assignment part is added.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">assign_to</span><span class="o">=</span><span class="s">&quot;var&quot;</span><span class="p">)</span>
<span class="go">      var = -715*x**18/65536 - 429*x**16/32768 - 33*x**14/2048 - 21*x**</span>
<span class="go">     @ 12/1024 - 7*x**10/256 - 5*x**8/128 - x**6/16 - x**4/8 - x**2/2 +</span>
<span class="go">     @ 1</span>
</pre></div>
</div>
<p>For piecewise functions, the assign_to option is mandatory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="n">Piecewise</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">),(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="bp">True</span><span class="p">)),</span> <span class="n">assign_to</span><span class="o">=</span><span class="s">&quot;var&quot;</span><span class="p">)</span>
<span class="go">      if (x &lt; 1) then</span>
<span class="go">        var = x</span>
<span class="go">      else</span>
<span class="go">        var = x**2</span>
<span class="go">      end if</span>
</pre></div>
</div>
<p>Note that only top-level piecewise functions are supported due to the lack of
a conditional operator in Fortran. Nested piecewise functions would require the
introduction of temporary variables, which is a type of expression manipulation
that goes beyond the scope of fcode.</p>
<p>Loops are generated if there are Indexed objects in the expression.  This
also requires use of the assign_to option.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">IndexedBase</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="n">integer</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">Idx</span><span class="p">(</span><span class="s">&#39;i&#39;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">B</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">assign_to</span><span class="o">=</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="go">    do i = 1, m</span>
<span class="go">        A(i) = 2*B(i)</span>
<span class="go">    end do</span>
</pre></div>
</div>
<p>Repeated indices in an expression with Indexed objects are interpreted as
summation. For instance, code for the trace of a matrix can be generated
with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">],</span> <span class="n">assign_to</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="go">      x = 0</span>
<span class="go">      do i = 1, m</span>
<span class="go">          x = x + A(i, i)</span>
<span class="go">      end do</span>
</pre></div>
</div>
<p>By default, number symbols such as <tt class="docutils literal"><span class="pre">pi</span></tt> and <tt class="docutils literal"><span class="pre">E</span></tt> are detected and defined as
Fortran parameters. The precision of the constants can be tuned with the
precision argument. Parameter definitions are easily avoided using the <tt class="docutils literal"><span class="pre">N</span></tt>
function.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">pi</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">E</span><span class="p">)</span>
<span class="go">      parameter (E = 2.71828182845905d0)</span>
<span class="go">      parameter (pi = 3.14159265358979d0)</span>
<span class="go">      x - pi**2 - E</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">pi</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">E</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="go">      parameter (E = 2.718281828459045235360287d0)</span>
<span class="go">      parameter (pi = 3.141592653589793238462643d0)</span>
<span class="go">      x - pi**2 - E</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="n">N</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">pi</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>
<span class="go">      x - 9.869604401089358618834491d0</span>
</pre></div>
</div>
<p>When some functions are not part of the Fortran standard, it might be desirable
to introduce the names of user-defined functions in the Fortran expression.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">gamma</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">user_functions</span><span class="o">=</span><span class="p">{</span><span class="n">gamma</span><span class="p">:</span> <span class="s">&#39;mygamma&#39;</span><span class="p">})</span>
<span class="go">      -mygamma(x)**2 + 1</span>
</pre></div>
</div>
<p>However, when the user_functions argument is not provided, fcode attempts to
use a reasonable default and adds a comment to inform the user of the issue.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">fcode</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">gamma</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">C     Not Fortran:</span>
<span class="go">C     gamma(x)</span>
<span class="go">      -gamma(x)**2 + 1</span>
</pre></div>
</div>
<p>By default the output is human readable code, ready for copy and paste. With the
option <tt class="docutils literal"><span class="pre">human=False</span></tt>, the return value is suitable for post-processing with
source code generators that write routines with multiple instructions. The
return value is a three-tuple containing: (i) a set of number symbols that must
be defined as &#8216;Fortran parameters&#8217;, (ii) a list functions that can not be
translated in pure Fortran and (iii) a string of Fortran code. A few examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">fcode</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">gamma</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">human</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">(set(), set([gamma(x)]), &#39;      -gamma(x)**2 + 1&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fcode</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">human</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">(set(), set(), &#39;      -sin(x)**2 + 1&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fcode</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">pi</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">human</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">(set([(pi, &#39;3.14159265358979d0&#39;)]), set(), &#39;      x - pi**2&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="preview">
<h2>Preview<a class="headerlink" href="#preview" title="Permalink to this headline">¶</a></h2>
<p>A useful function is <tt class="docutils literal"><span class="pre">preview</span></tt>:</p>
<span class="target" id="module-sympy.printing.preview"></span><dl class="function">
<dt id="sympy.printing.preview.preview">
<tt class="descclassname">sympy.printing.preview.</tt><tt class="descname">preview</tt><big>(</big><em>expr</em>, <em>output='png'</em>, <em>viewer=None</em>, <em>euler=True</em><big>)</big><a class="reference internal" href="../_modules/sympy/printing/preview.html#preview"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sympy.printing.preview.preview" title="Permalink to this definition">¶</a></dt>
<dd><p>View expression in PNG, DVI, PostScript or PDF form.</p>
<p>This will generate LaTeX representation of the given expression
and compile it using available TeX distribution. Then it will
run appropriate viewer for the given output format or use the
user defined one. By default png output is generated.</p>
<p>By default pretty Euler fonts are used for typesetting (they
were used to typeset the well known &#8220;Concrete Mathematics&#8221;
book). For that to work, you need the &#8216;eulervm.sty&#8217; LaTeX style (in
Debian/Ubuntu, install the texlive-fonts-extra package). If you prefer
default AMS fonts or your system lacks &#8216;eulervm&#8217; LaTeX package then
unset the &#8216;euler&#8217; keyword argument.</p>
<p>To use viewer auto-detection, lets say for &#8216;png&#8217; output, issue:</p>
<div class="highlight-python"><pre>&gt;&gt; from sympy import *
&gt;&gt; x, y = symbols("x,y")

&gt;&gt; preview(x + y, output='png')</pre>
</div>
<p>This will choose &#8216;pyglet by default. To select different one:</p>
<div class="highlight-python"><pre>&gt;&gt; preview(x + y, output='png', viewer='gimp')</pre>
</div>
<p>The &#8216;png&#8217; format is considered special. For all other formats
the rules are slightly different. As an example we will take
&#8216;dvi&#8217; output format. If you would run:</p>
<div class="highlight-python"><pre>&gt;&gt; preview(x + y, output='dvi')</pre>
</div>
<p>then &#8216;view&#8217; will look for available &#8216;dvi&#8217; viewers on your
system (predefined in the function, so it will try evince,
first, then kdvi and xdvi). If nothing is found you will
need to set the viewer explicitly:</p>
<div class="highlight-python"><pre>&gt;&gt; preview(x + y, output='dvi', viewer='superior-dvi-viewer')</pre>
</div>
<p>This will skip auto-detection and will run user specified
&#8216;superior-dvi-viewer&#8217;. If &#8216;view&#8217; fails to find it on
your system it will gracefully raise an exception.</p>
<p>Currently this depends on pexpect, which is not available for windows.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/sympylogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Printing System</a><ul>
<li><a class="reference internal" href="#module-sympy.printing.printer">Printer Class</a></li>
<li><a class="reference internal" href="#module-sympy.printing.pretty.pretty">PrettyPrinter Class</a></li>
<li><a class="reference internal" href="#module-sympy.printing.mathml">MathMLPrinter</a></li>
<li><a class="reference internal" href="#module-sympy.printing.latex">LatexPrinter</a></li>
<li><a class="reference internal" href="#module-sympy.printing.gtk">Gtk</a></li>
<li><a class="reference internal" href="#module-sympy.printing.python">PythonPrinter</a></li>
<li><a class="reference internal" href="#fcode">fcode</a></li>
<li><a class="reference internal" href="#preview">Preview</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="polys/literature.html"
                        title="previous chapter">Literature</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plotting.html"
                        title="next chapter">Plotting</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/modules/printing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting"
             >next</a> |</li>
        <li class="right" >
          <a href="polys/literature.html" title="Literature"
             >previous</a> |</li>
        <li><a href="../index.html">SymPy v0.7.1 documentation</a> &raquo;</li>
          <li><a href="index.html" >SymPy Modules Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008, 2009, 2010, 2011 SymPy Development Team.
      Last updated on Jul 29, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>